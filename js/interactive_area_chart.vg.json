{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "data": {
    "url": "https://raw.githubusercontent.com/pdmntrang/data-visualisation/main/data/suicide-rate.csv"
  },
  "params": [
  {
    "name": "Gender_selection",
    "value": "Both sexes",
    "bind": {
      "input": "select",
      "options": [
        "Both sexes",
        "Male",
        "Female"
      ],
      "labels": [
        "Total",
        "Male",
        "Female"
      ],
      "name": "Gender selection: "
    }
  }],
  "transform": [
    {"filter": "Gender_selection == null || datum.Sex == Gender_selection"}
  ],
  "vconcat": [
    {
      "width": 500,
      "height": 200,
      "mark": "area",
      "encoding": {
        "x": {
          "timeUnit": "year", 
          "field": "Year",
          "scale": {"domain": {"param": "brush"}},
          "axis": {"title": "", "tickCount": 10}
        },
        "y": {
          "aggregate": "average",
          "field": "Rate", "type": "quantitative",
          "title": "Average Suicide Rate"},
        "color": {
          "field": "Continent",
          "type": "nominal",
          "scale": {
            "domain": [
              "Africa",
              "Americas",
              "Eastern Mediterranean",
              "Europe",
              "South-East Asia",
              "Western Pacific"
            ],
            "range": [
              "#bbdefb",
              "#f4a261",
              "#f47068",
              "#cdb4db",
              "#e6ccb2",
              "#5390d9"
            ]
          }
        },
        "tooltip": [
          {
            "field": "Continent", 
            "type": "nominal", 
            "title": "Continent"},
          {
            "field": "Rate", 
            "aggregate": "average", 
            "type": "quantitative", 
            "title": "Suicide Rate (%)", 
            "format": ".2f"}
        ]
      }
    },
    {
      "width": 500,
      "height": 50,
      "mark": "line",
      "params": [
        {"name": "brush", 
          "select": {"type": "interval", "encodings": ["x"]}}
      ],
      "encoding": {
        "x": {
          "field": "Year", 
          "type": "temporal", 
          "axis": {"tickCount": 11}},
        "y": {
          "aggregate": "average",
          "field": "Rate",
          "type": "quantitative",
          "axis": {"tickCount": 3, "grid": false},
          "title": "Average Suicide Rate"
        }
      }
    }
  ]
}